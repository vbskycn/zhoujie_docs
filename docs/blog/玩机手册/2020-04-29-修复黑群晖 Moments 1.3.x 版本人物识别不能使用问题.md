---
title: "修复黑群晖 Moments 1.3.x 版本人物识别不能使用问题"
date: "2020-04-29"
categories: 
  - "diannaowangruo"
tags: 
  - "moments"
url: "/archives/1638.html"
---

黑群晖Moments 1.3以上版本存在无法智能识别人物和主题分类等功能，如果你的黑群晖系统是6.2.2以下的系统，可以直接[点击下载](https://www.chrno.cn/nas/1506.html)Moments1.2旧版本解决问题。6.2.2系统无法安装1.2版本的Moments，会提示版本不兼容，下面我们就来修复1.3Moments套件智能识别的问题。

修复原理：将Moments1.2版本的libsynophoto-plugin-detection.so文件替换到Moments1.3版本中使用。

1.停止Moments套件，群晖控制面板-终端机和SNMP-启用SSH功能。

2.下载 [libsynophoto-plugin-detection.so](https://zbds.lanzous.com/ic2n8bg) 文件

3.通过SSH 登录群晖，我使用的是WinSCP结合putty，登录 root 账号，6.2.2切换root用户指令

<table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><div class="crayon-num" data-line="crayon-5ea9454206a2f166642544-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5ea9454206a2f166642544-2">2</div></div></td><td class="crayon-code"><div class="crayon-pre"><div id="crayon-5ea9454206a2f166642544-1" class="crayon-line"><span class="crayon-c">//管理员切换root用户</span></div><div id="crayon-5ea9454206a2f166642544-2" class="crayon-line crayon-striped-line"><span class="crayon-v">sudo</span> <span class="crayon-o">-</span><span class="crayon-v">i</span></div></div></td></tr></tbody></table>

4.备份原文件

<table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><div class="crayon-num" data-line="crayon-5ea9454206a38493220724-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5ea9454206a38493220724-2">2</div></div></td><td class="crayon-code"><div class="crayon-pre"><div id="crayon-5ea9454206a38493220724-1" class="crayon-line"><span class="crayon-c">//备份原文件</span></div><div id="crayon-5ea9454206a38493220724-2" class="crayon-line crayon-striped-line"><span class="crayon-v">mv</span> <span class="crayon-o">/</span><span class="crayon-t">var</span><span class="crayon-o">/</span><span class="crayon-v">packages</span><span class="crayon-o">/</span><span class="crayon-v">SynologyMoments</span><span class="crayon-o">/</span><span class="crayon-v">target</span><span class="crayon-o">/</span><span class="crayon-v">usr</span><span class="crayon-o">/</span><span class="crayon-v">lib</span><span class="crayon-o">/</span><span class="crayon-v">libsynophoto</span><span class="crayon-o">-</span><span class="crayon-v">plugin</span><span class="crayon-o">-</span><span class="crayon-v">detection</span><span class="crayon-sy">.</span><span class="crayon-v">so</span> <span class="crayon-o">/</span><span class="crayon-t">var</span><span class="crayon-o">/</span><span class="crayon-v">packages</span><span class="crayon-o">/</span><span class="crayon-v">SynologyMoments</span><span class="crayon-o">/</span><span class="crayon-v">target</span><span class="crayon-o">/</span><span class="crayon-v">usr</span><span class="crayon-o">/</span><span class="crayon-v">lib</span><span class="crayon-o">/</span><span class="crayon-v">libsynophoto</span><span class="crayon-o">-</span><span class="crayon-v">plugin</span><span class="crayon-o">-</span><span class="crayon-v">detection</span><span class="crayon-sy">.</span><span class="crayon-v">so</span><span class="crayon-sy">.</span><span class="crayon-v">bak</span></div></div></td></tr></tbody></table>

\[caption id="attachment\_1641" align="alignnone" width="802"\][![QQ图片20200305172057](https://img-cloud.zhoujie218.top/wp-content/uploads/2020/04/unnamed-file-21.png)](https://img-cloud.zhoujie218.top/wp-content/uploads/2020/04/unnamed-file-21.png) QQ图片20200305172057\[/caption\]

5.将下载的libsynophoto-plugin-detection.so文件放到 `/var/packages/SynologyMoments/target/usr/lib/` 路径下。我们还是需要通过SSH指令输入。比如我先将文件上传到群晖位于储存空间1上的File文件夹下，然后通过mv指令移动到我们需要的目录下，大家根据自己的情况自行修改指令。

<table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><div class="crayon-num" data-line="crayon-5ea9454206a3c578210266-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5ea9454206a3c578210266-2">2</div></div></td><td class="crayon-code"><div class="crayon-pre"><div id="crayon-5ea9454206a3c578210266-1" class="crayon-line"><span class="crayon-c">//群晖储存空间1上的File文件夹下的libsynophoto-plugin-detection.so文件复制到Moments套件中</span></div><div id="crayon-5ea9454206a3c578210266-2" class="crayon-line crayon-striped-line"><span class="crayon-v">mv</span> <span class="crayon-o">/</span><span class="crayon-v">volume1</span><span class="crayon-o">/</span><span class="crayon-v">File</span><span class="crayon-o">/</span><span class="crayon-v">libsynophoto</span><span class="crayon-o">-</span><span class="crayon-v">plugin</span><span class="crayon-o">-</span><span class="crayon-v">detection</span><span class="crayon-sy">.</span><span class="crayon-v">so</span> <span class="crayon-o">/</span><span class="crayon-t">var</span><span class="crayon-o">/</span><span class="crayon-v">packages</span><span class="crayon-o">/</span><span class="crayon-v">SynologyMoments</span><span class="crayon-o">/</span><span class="crayon-v">target</span><span class="crayon-o">/</span><span class="crayon-v">usr</span><span class="crayon-o">/</span><span class="crayon-v">lib</span><span class="crayon-o">/</span><span class="crayon-v">libsynophoto</span><span class="crayon-o">-</span><span class="crayon-v">plugin</span><span class="crayon-o">-</span><span class="crayon-v">detection</span><span class="crayon-sy">.</span><span class="crayon-v">so</span></div></div></td></tr></tbody></table>

6.修改libsynophoto-plugin-detection.so文件的组和拥有者为SynologyMoments，并修改文件权限为0755，如下图。[](https://www.chrno.cn/wp-content/uploads/2020/03/2020030509320277.png)

<table class="crayon-table"><tbody><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><div class="crayon-num" data-line="crayon-5ea9454206a3f892892112-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5ea9454206a3f892892112-2">2</div><div class="crayon-num" data-line="crayon-5ea9454206a3f892892112-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5ea9454206a3f892892112-4">4</div><div class="crayon-num" data-line="crayon-5ea9454206a3f892892112-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5ea9454206a3f892892112-6">6</div></div></td><td class="crayon-code"><div class="crayon-pre"><div id="crayon-5ea9454206a3f892892112-1" class="crayon-line"><span class="crayon-c">//首先root账户进入到Moments文件夹下</span></div><div id="crayon-5ea9454206a3f892892112-2" class="crayon-line crayon-striped-line"><span class="crayon-v">cd</span> <span class="crayon-o">/</span><span class="crayon-t">var</span><span class="crayon-o">/</span><span class="crayon-v">packages</span><span class="crayon-o">/</span><span class="crayon-v">SynologyMoments</span><span class="crayon-o">/</span><span class="crayon-v">target</span><span class="crayon-o">/</span><span class="crayon-v">usr</span><span class="crayon-o">/</span><span class="crayon-v">lib</span></div><div id="crayon-5ea9454206a3f892892112-3" class="crayon-line"><span class="crayon-c">//修改libsynophoto-plugin-detection.so文件组为SynologyMoments</span></div><div id="crayon-5ea9454206a3f892892112-4" class="crayon-line crayon-striped-line"><span class="crayon-e">chgrp </span><span class="crayon-e">SynologyMoments </span><span class="crayon-v">libsynophoto</span><span class="crayon-o">-</span><span class="crayon-v">plugin</span><span class="crayon-o">-</span><span class="crayon-v">detection</span><span class="crayon-sy">.</span><span class="crayon-v">so</span></div><div id="crayon-5ea9454206a3f892892112-5" class="crayon-line"><span class="crayon-c">//修改libsynophoto-plugin-detection.so文件拥有者为SynologyMoments</span></div><div id="crayon-5ea9454206a3f892892112-6" class="crayon-line crayon-striped-line"><span class="crayon-e">chown </span><span class="crayon-e">SynologyMoments </span><span class="crayon-v">libsynophoto</span><span class="crayon-o">-</span><span class="crayon-v">plugin</span><span class="crayon-o">-</span><span class="crayon-v">detection</span><span class="crayon-sy">.</span><span class="crayon-v">so</span></div></div></td></tr></tbody></table>

\[caption id="attachment\_1642" align="alignnone" width="363"\][![QQ图片20200305173151](https://img-cloud.zhoujie218.top/wp-content/uploads/2020/04/unnamed-file-22.png)](https://img-cloud.zhoujie218.top/wp-content/uploads/2020/04/unnamed-file-22.png) QQ图片20200305173151\[/caption\]

7.修改完成后退出，启动Moments套件，并重新建立索引，就可以正常AI识别人物和主题了。
